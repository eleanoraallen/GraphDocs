# Introduction

The DCMP (Digital Cognitive Mapping Project) API is designed to give researchers and developers easy access to all the data collected as a part of the [College Hill Digital Cognitive Mapping Project](http://dcmp-fronend.s3-website-us-east-1.amazonaws.com/), or any other projects created using the same system. The DCMP API gives everyone access not only to all of the information collected by this project, but to a powerful set of tools for filtering and analyzing this data, as well as the ability to easily integrate this information into any future projects.

To use the DCMP API, all you need is this endpoint link: [https://dcmp-server.herokuapp.com/](https://dcmp-server.herokuapp.com/).

# Getting Started

The DCMP API is built around [GraphQL](https://graphql.org/). If you aren't familiar with GraphQL, it might be helpful to go over [the specs](https://graphql.org/learn/). However, this API is relatively simple and uses only a few GraphQL's features, so you absolutely do not need to be an expert to have access to this data.

### About GraphQL

GraphQL is a query language and a runtime system. Clients form requests (called queries) by using the GraphQL query language, and the GraphQL server executes these requests and returns the data in a response. Unlike REST APIs, which expose a different endpoint for each resource object, a GraphQL API makes all data available at a single endpoint. A client specifies exactly the data that it wants, and the server responds with only that data. GraphQL is seen as a modern alternative to a REST-based architecture and aimed at solving its shortcomings.

The documentation for a GraphQL API lives side-by-side with the code that constitutes it. Combined with the typed Schema, this means that we can generate accurate and up-to-date documentation whenever something changes. Using GraphQL's introspection feature, you can query the Schema itself to explore its contents and documentation.

### GraphQL Basics

Everything that's available through a GraphQL API is typed and included in its Schema. You can use this Schema to build queries that return only the data that you need. This solves the problem of over-fetching data. It also means that we know which fields each app is using, making it easier for us to evolve our APIs over time. 

All GraphQL requests are sent to the same endpoint, which means that you can often retrieve all the data that you need in a single request. Using GraphQL features such as connections, variables, and aliases, you can make your queries incredibly efficient and retrieve data about many resource types in a single request. Learn about query features [here](https://graphql.org/learn/queries/).

# Maps

There are two main types of data that are available through DCMP API: Maps and Points. A `Map` represents the information for a single user created map, while a `Point` represents the information for a single point on a user created map. A `Map`:

<Type printHeader=false printDescriptions=false>Map</Type>

stores several important pieces of information. All Maps are guaranteed to have a unique ID field and a createdAt field which stores the time and date at which the Map was created as a String in [UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time) format.

There are two queries that can be used to retrieve Maps. `map` is used to retrieve information about a single map while `mapList` is used to retrive multiple Maps at once.

<OperationTable include=[map]>Query</OperationTable>

## Retrieving Maps

In order to retrieve a single Map, all you need is the Map's ID, a unique alphanumeric string that is generated by the backend whenever a new map is submitted.

#### Retrieve a Single Map

<Example>query { map(id: "5ec2c75ab215030017d1d16e") {
  id
  createdAt
  creatorName
  description
	}
}</Example>

## Retrieving Lists of Maps

The `mapList` query is used to retrieve lists of Maps. It takes three optional arguments `size` which specifies the maximum length of the list returned (by default 10), `page` which specifies the index of the page you want to retrieve (default 0, which for this operation means the most recent) and `query` a filter which can be applied to return a number of different results. A `MapListQuery`:

<Type printHeader=false>MapListQuery</Type>

has a number of fields that can be used to select different Maps. The operation field can be used to specify an operation to perform on the database: AND (default) if you want all returned values to comply with all the other fields, OR if you want all returned values to comply with at least one of the other fields, and NOR if you want all returned values to comply with none of the other fields.

#### Retrieve a List of Maps
<Example>query {mapList(size: 3) {id}}</Example>



# Points

Points are the other main datatype used in the DCMP API. A `Point`:

<Type printHeader=false printDescriptions=false>Map</Type>

stores a number of important pieces of information. All Point's are guaranteed to have four fields: a unique ID field, a name field which stores user given the name of the Point, a `mapId` field which stores the ID of the Map with which the given Point is associated, and a `Cordinates` object:

<Type printHeader=false printDescriptions=false>Coordinates</Type>

which stores the Point's x y coordinates. 

There are two queries that can be used to retrieve Points. `point` is used to retrieve information about a single Point while `pointList` is used to retrive multiple Points at once.

<OperationTable exclude=[map]>Query</OperationTable>

## Retrieving a Single Point

In order to retrieve a single Point, all you need is that Point's ID, a unique alphanumeric string that is generated by the backend whenever a new map is submitted.

#### Retrieving a Single Point
<Example>query {point(id: "5ec2c75ab215030017d1d17e") {id mapId name coordinates {x y} creatorName category otherText description}</Example>

## Retrieving a List of Points
The `pointList` query is used to retrieve lists of Points. Like `mapList`, `pointList` takes three optional arguments `size` which specifies the maximum length of the list returned (by default 10), `page` which specifies the index of the page you want to retrieve (default 0, which for this operation means the first points added) and `query` a filter which can be applied to return a number of different results. A `PointListQuery`:

<Type printHeader=false>PointListQuery</Type>

has a number of fields that can be used to select different Points. The operation field can be used to specify an operation to perform on the database: AND (default) if you want all returned values to comply with all the other fields, OR if you want all returned values to comply with at least one of the other fields, and NOR if you want all returned values to comply with none of the other fields.

#### Retrieving a List of Points

<Example>query {pointList(size: 3 query: {mapId: "5ec2c75ab215030017d1d16e" coordinates: [230, 428] within: 75}) {id name coordinates {x y}}}</Example>



# API Reference

## Queries

<OperationTable>Query</OperationTable>

## Types

<TypeList showLines=false>Object</TypeList>

## Inputs

<TypeList showLines=false>Input_Object</TypeList>

## Enumerators

<TypeList printDescriptions=false showLines=false exclude=[CacheControlScope]>Enum</TypeList>



# Resources

GraphQL Playground [here](https://dcmp-server.herokuapp.com/).

Backend repo [here](https://github.com/nathanmichaelallen/dcmp-server).

Frontend repo [here](https://github.com/nathanmichaelallen/dcmp-frontend).

Documentation repo [here](https://github.com/nathanmichaelallen/GraphDocs).

Thanks for taking the time to look at my project! I really appreciate it :)